<!DOCTYPE html>
<!-- saved from url=(0028)https://bamboozledagain.com/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sticker Home</title>
    
    
	<link rel="stylesheet" href="./Sticker Home_files/admin.css">
	<script src="./Sticker Home_files/jquery.min.js"></script>

</head>
<body>
    
    <br>
	<br>
	<h1>Sticker Home Page</h1>
	<p>You can join a game or create a new one!</p>
    <br>
    <div id="id_message">
		<h2>Join An Existing Game</h2>
		<table id="id_dashboard_table">
		<tbody><tr>
			<th>Game ID</th>  
			<th>Game position</th>  
			<th>Current player on turn</th>
			<th>Description</th>
			<th></th>  
		</tr>
		
			
				<tr>
					<td id="id_id_of_game0">0</td>
					<td id="id_position_of_game0">[1, 3, 3, 0]</td>
					<td id="id_player_on_game0">Bob</td>
					<td id="id_description_of_game0">Playin wit myself</td>
					<td id="id_link_to_game0"><a href="https://bamboozledagain.com/game/0">Visit Game</a></td>
				</tr>
			
				<tr>
					<td id="id_id_of_game1">1</td>
					<td id="id_position_of_game1">[1, 3, 5, 7]</td>
					<td id="id_player_on_game1">Lolek</td>
					<td id="id_description_of_game1">Lolek ibolek</td>
					<td id="id_link_to_game1"><a href="https://bamboozledagain.com/game/1">Visit Game</a></td>
				</tr>
			
		
		</tbody></table>
		<br>
		<br>
		<br>
		<h2>Create New Game</h2>
		<form method="POST" action="https://bamboozledagain.com/new_game">
			<input type="hidden" name="csrfmiddlewaretoken" value="vLrVfWsSG5emujZyWaDCkOVB6YVAVbyMlR5xX19GiJmYeNXmlXWHXDf8ZcrDModc">
			<label for="id_player1">Player1:</label><input type="text" name="player1" maxlength="20" minlength="3" required="" id="id_player1">
<label for="id_player2">Player2:</label><input type="text" name="player2" maxlength="20" minlength="3" required="" id="id_player2">
<label for="id_game_description">Game description:</label><input type="text" name="game_description" maxlength="50" required="" id="id_game_description">
			<input type="submit" value="Start New Game" id="id_submit_button">
		</form>
    </div>
	<script>
		setInterval(updateGameDashboard, 500);
	
		function getTableFromDOM() {
			var tableInDOM = document.getElementById('id_dashboard_table').innerHTML;
			var tableInDOMWithoutWhitespaces = removeWhitespacesFromString(tableInDOM);
			var tableInDOMWithoutTbodyTags = removeTbodyTagsFromString(tableInDOMWithoutWhitespaces);
			return tableInDOMWithoutTbodyTags;
		}
		
		function removeWhitespacesFromString(string) {
			var stringWithoutWhitespaces = string.replace(/\s/g, "");
			return stringWithoutWhitespaces;
		}

		function removeTbodyTagsFromString(tableString) {
			var removedFrontTag = tableString.replace("<tbody>", "");
			var removedBothTags = removedFrontTag.replace("</tbody>", "");
			return removedBothTags;
		}

		function updateGameDashboard () {
			$.ajax({
				synch: 'true',
				type: 'GET',
				url: '/',
				dataType: 'html',
				success: function(data) {
					var updatedTable = data.slice(data.indexOf('<tr>'), data.indexOf('</table>'));
					var updatedTableWithoutWhitespaces = removeWhitespacesFromString(updatedTable);
					var currentTableWithoutWhitespaces = getTableFromDOM();
					if (currentTableWithoutWhitespaces == updatedTableWithoutWhitespaces) {
					} else {
						$('#id_dashboard_table').html(updatedTable);
					};
				},
				error: function() {
					console.log('Something is wrong, AJAX call failed');
				}
			})
		}
	</script>



</body></html>